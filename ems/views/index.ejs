<!--
    Title: index.ejs
    Author: Alex Haefner
    Date: 5--2021
    Description: Main page
-->
<!-- Including header script, a great way to decouple HTML content -->
<%- include('header.ejs'); -%>

<body>
    <%- include('navbar.ejs'); -%>


    <section class="container-fluid px-0">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div id="headingGroup" class="text-white text-center d-none d-lg-block mt-5">
                    <h1 class="">WELCOME<span>/</span>EMS</h1>
                    <h1 class="">WELCOME<span>/</span>EMS</h1>
                    <h1 class="">WELCOME<span>/</span>EMS</h1>
                    <h1 class="">WELCOME<span>/</span>EMS</h1>
                    <h1 class="">WELCOME<span>/</span>EMS</h1>
                    <h1 class="">WELCOME<span>/</span>EMS</h1>
                    <h1 class="">WELCOME<span>/</span>EMS</h1>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="row justify-content-center">
                    <div class="col-10 col-lg-8 blurb mb-5 mb-md-0">
                <p class="lead">Welcome to my landing page. This website is built using Node.js. Along with 
                    using Node, page elements like footer, header, and navbar are split up
                    into different views.
                </p>
            </div>
        </div>
        </div>
    </section>
    <div role="main" class = "container">
        <br><br>
        <h2><%= title %></h2>
        <form method = "post" action="/process"></form>
        <div class = "form-group">
            <div class="form-group">
                <label for="txtName">Name:</label>
                <input type="text" class="form-control" id="txtName" name="txtName" />
            </div>
            <div class="form-group">
                <!-- CSRF token -->
                <input name="_csrf" value="<%= csrfToken %>" type="hidden" />
                <button type="submit" class="btn btn-secondary float-right">Submit</button>
            </div>
        </form>
    </div>


    <% if (employees.length) { %>
        <h2>Employees</h2>
        <br />
        <a class="" href="/new">New Employee</a>
        <br />
        <table class="table table-hover">
          <thead class="bg-secondary" style="color: #f5d9d5">
          <tr>
            <th class="text-white" >Name</th>
            <th class="text-white">Functions</th>
          </tr>
          </thead>
          <tbody>
          <% employees.forEach(function (entry) { %>
            <tr>
              <td><%= entry.name %></td>
              <td style="width: 10%; text-align: center;">
                <a href="/view/<%= entry.name %>">
                  <i class="fa fa-eye" aria-hidden="true"></i>
                </a>
              </td>
            </tr>
          </tbody>
          <% }) %>
        </table>
      <% } else { %> No entries! <a href="/new">Add one!</a>
      <% } %>
    <%- include('footer.ejs'); -%>

</body>
